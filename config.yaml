# 2025-10-16-19-00-00
# cad_rms_integration/config.yaml
# Author: R. A. Carucci
# Purpose: Configuration for CAD/RMS integration pipeline with environment-specific settings

# Basic configuration
pipeline_version: "1.0.0"
schema_version: "1.0.0"
environment: "production"  # production, development, test

# File paths (environment-specific)
base_path: "C:/Users/carucci_r/OneDrive - City of Hackensack"
exports_directory: "05_EXPORTS"
output_directory: "02_ETL_Scripts/Combined_CAD_RMS/02_Final_Output"
reports_directory: "02_ETL_Scripts/Combined_CAD_RMS/03_Reports"
schema_registry: "schema_registry.yaml"
reference_data_directory: "02_ETL_Scripts/Reference_Data"

# Data source patterns
cad_file_patterns:
  - "_CAD/2024_CAD_ALL.xlsx"
  - "_CAD/2025_07_CAD.xlsx"

rms_file_patterns:
  - "_RMS/2024_ALL_RMS.xlsx"
  - "_RMS/2025_01_25_to_06_25_RMS.xlsx"
  - "_RMS/2025_07_RMS_Export.xlsx"

exclude_patterns:
  - "*CORRUPTED*"
  - "*OLD*"

# Performance settings
chunk_size: 10000
processing_batch_size: 5000
max_excel_columns: 50
chunkable_files:
  - "*2024_ALL*"
  - "*2024_CAD*"

# Field mappings
case_number_regex: "(\\d{2}-\\d{6})"
supplement_pattern: "[A-Z]$|S\\d+$"
backup_pattern: "BACKUP|Assist Own Agency"

# Processing options
exclude_supplements: true
calculate_response_times: true
apply_address_normalization: true
apply_officer_mapping: true

# Output configuration
key_fields:
  - "Case_Number"
  - "Incident"
  - "FullAddress2"
  - "Time of Call"
  - "Time Dispatched"
  - "Officer"
  - "PDZone"

priority_columns:
  - "Case_Number"
  - "Integration_Type"
  - "Match_Confidence"
  - "Data_Quality_Score"
  - "Time of Call"
  - "Time Dispatched"
  - "Time Out"
  - "Time In"
  - "FullAddress2"
  - "PDZone"
  - "Grid"
  - "Incident"
  - "Officer"
  - "RMS_Disposition"

powerbi_columns:
  - "Case_Number"
  - "Incident"
  - "Time of Call"
  - "Time Dispatched"
  - "Time Out" 
  - "Time In"
  - "Response_Time_Seconds"
  - "Travel_Time_Seconds"
  - "FullAddress2"
  - "PDZone"
  - "Grid"
  - "Officer"
  - "Integration_Type"
  - "Match_Confidence"
  - "Data_Quality_Score"
  - "RMS_Disposition"
  - "RMS_Officer"
  - "Data_Source"
  - "Source_File"

# ArcGIS specific settings
arcgis_fields:
  - "Case_Number"
  - "FullAddress2" 
  - "PDZone"
  - "Incident"
  - "Time of Call"
  - "Officer"
  - "Data_Quality_Score"

# Data quality thresholds
quality_thresholds:
  high: 80
  medium: 60
  low: 0

# Reference data files
officer_mapping_file: "Assignment_Master_V2.xlsx"
call_type_mapping_file: "CallType_Categories.xlsx"
address_validation_file: "Hackensack_Streets.xlsx"

# Logging configuration
log_level: "INFO"  # DEBUG, INFO, WARNING, ERROR
log_file: "integration_pipeline.log"
detailed_logging: true

# Error handling
continue_on_errors: true
error_threshold: 100  # Maximum errors before pipeline fails

# Environment-specific overrides
environments:
  development:
    base_path: "C:/Development/Hackensack"
    log_level: "DEBUG"
    detailed_logging: true
  
  test:
    base_path: "C:/Test/Hackensack"
    cad_file_patterns:
      - "_CAD/Test_CAD_Sample.xlsx"
    rms_file_patterns:
      - "_RMS/Test_RMS_Sample.xlsx"

# Version history
version_history:
  - version: "1.0.0"
    date: "2025-10-16"
    author: "R. A. Carucci"
    changes:
      - "Initial configuration"
