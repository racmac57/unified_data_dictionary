{
  "version": "1.0",
  "system": "CAD",
  "source_file_default_name": "Hackensack_CAD_Data.xlsx",
  "timezone": "America/New_York",
  "generated_on": "2025-12-16",
  "fields": [
    {
      "source_field_name": null,
      "internal_field_name": "ReportNumberNew",
      "esri_field_name": null,
      "description": null,
      "required": null,
      "nullable": null,
      "source_type": null,
      "output_type": "string",
      "accepted_formats": [],
      "trim": null,
      "normalize_whitespace": null,
      "case_rule": null,
      "domain_file": null,
      "derive_rule": null,
      "coercions": null,
      "default_rule": "Required key. Missing column in sample builder -> pd.NA; in rebuild script -> None; in deploy ensure-columns -> np.nan.",
      "validation": {}
    },
    {
      "source_field_name": null,
      "internal_field_name": "Incident",
      "esri_field_name": null,
      "description": null,
      "required": null,
      "nullable": null,
      "source_type": null,
      "output_type": "string",
      "accepted_formats": [],
      "trim": null,
      "normalize_whitespace": null,
      "case_rule": null,
      "domain_file": [
        "scripts/backfill_incidents_from_rms.py (RMS incident backfill)",
        "config/config_enhanced.json (rms.incident_field)",
        "doc/2025_11_21_unmapped_incident.csv (optional incident normalization rules)"
      ],
      "derive_rule": null,
      "coercions": null,
      "default_rule": "Optional. Blank stays blank; can be backfilled by joining RMS on ReportNumberNew (RMS column 'Incident Type_1').",
      "validation": {}
    },
    {
      "source_field_name": null,
      "internal_field_name": "HowReported",
      "esri_field_name": null,
      "description": null,
      "required": null,
      "nullable": null,
      "source_type": null,
      "output_type": "string",
      "accepted_formats": [],
      "trim": null,
      "normalize_whitespace": null,
      "case_rule": null,
      "domain_file": [
        "config/config.yml (field_mappings.how_reported.patterns)",
        "config/config_enhanced.json (validation_lists.how_reported)",
        "scripts/esri_final_validation.py (ESRIFinalValidator.valid_how_reported)"
      ],
      "derive_rule": null,
      "coercions": null,
      "default_rule": "Optional. Normalized via pattern rules; guard against Excel artifacts in sample export flow. Blank stays blank if source is blank/missing.",
      "validation": {}
    },
    {
      "source_field_name": null,
      "internal_field_name": "FullAddress2",
      "esri_field_name": null,
      "description": null,
      "required": null,
      "nullable": null,
      "source_type": null,
      "output_type": "string",
      "accepted_formats": [],
      "trim": null,
      "normalize_whitespace": null,
      "case_rule": null,
      "domain_file": [
        "config/config.yml (paths.corrections.address)",
        "scripts/apply_manual_corrections.py (FullAddress2 corrections by ReportNumberNew)",
        "scripts/cad_zone_merger.py (zone/grid merge uses FullAddress2 normalization)"
      ],
      "derive_rule": null,
      "coercions": null,
      "default_rule": "Optional. Manual corrections may overwrite per ReportNumberNew; may be backfilled/validated by address scripts. Blank stays blank.",
      "validation": {}
    },
    {
      "source_field_name": null,
      "internal_field_name": "PDZone",
      "esri_field_name": null,
      "description": null,
      "required": null,
      "nullable": null,
      "source_type": null,
      "output_type": "string",
      "accepted_formats": [],
      "trim": null,
      "normalize_whitespace": null,
      "case_rule": null,
      "domain_file": [
        "config/config_enhanced.json (validation_lists.valid_zones)",
        "scripts/cad_zone_merger.py (zone master merge provides PDZone)"
      ],
      "derive_rule": null,
      "coercions": null,
      "default_rule": "In sample export builder: coerced numeric via pd.to_numeric(errors='coerce') -> NaN if invalid. In deploy schema: treated as text.",
      "validation": {}
    },
    {
      "source_field_name": null,
      "internal_field_name": "Grid",
      "esri_field_name": null,
      "description": null,
      "required": null,
      "nullable": null,
      "source_type": null,
      "output_type": "string",
      "accepted_formats": [],
      "trim": null,
      "normalize_whitespace": null,
      "case_rule": null,
      "domain_file": [
        "scripts/cad_zone_merger.py (zone master merge provides Grid)",
        "config/config_enhanced.json (paths.zone_master)"
      ],
      "derive_rule": null,
      "coercions": null,
      "default_rule": "Optional. Blank stays blank; may be filled via zone master merge keyed off FullAddress2 normalization.",
      "validation": {}
    },
    {
      "source_field_name": null,
      "internal_field_name": "TimeOfCall",
      "esri_field_name": null,
      "description": null,
      "required": null,
      "nullable": null,
      "source_type": null,
      "output_type": "datetime",
      "accepted_formats": [],
      "trim": null,
      "normalize_whitespace": null,
      "case_rule": null,
      "domain_file": [
        "scripts/esri_final_validation.py (TimeOfCall validation + derived fields rules)",
        "Notion_Outline_Export/CAD_Data_Cleaning_Engine.md (TimeOfCall definition)"
      ],
      "derive_rule": null,
      "coercions": null,
      "default_rule": "If raw 'Time of Call' exists, deploy rename maps it to TimeOfCall. Invalid dates become NaT when parsed in validator flows; missing remains blank.",
      "validation": {}
    },
    {
      "source_field_name": null,
      "internal_field_name": "cYear",
      "esri_field_name": null,
      "description": null,
      "required": null,
      "nullable": null,
      "source_type": null,
      "output_type": "string",
      "accepted_formats": [],
      "trim": null,
      "normalize_whitespace": null,
      "case_rule": null,
      "domain_file": [
        "scripts/esri_final_validation.py (expected_year = TimeOfCall.dt.year)",
        "Notion_Outline_Export/CAD_Data_Cleaning_Engine.md (cYear definition)"
      ],
      "derive_rule": null,
      "coercions": null,
      "default_rule": "Derived from TimeOfCall in ESRI model; may exist as provided column. In sample builder, coerced numeric -> NaN if invalid.",
      "validation": {}
    },
    {
      "source_field_name": null,
      "internal_field_name": "cMonth",
      "esri_field_name": null,
      "description": null,
      "required": null,
      "nullable": null,
      "source_type": null,
      "output_type": "string",
      "accepted_formats": [],
      "trim": null,
      "normalize_whitespace": null,
      "case_rule": null,
      "domain_file": [
        "scripts/esri_final_validation.py (expected_month = TimeOfCall.dt.strftime('%B'))",
        "Notion_Outline_Export/CAD_Data_Cleaning_Engine.md (cMonth definition)"
      ],
      "derive_rule": null,
      "coercions": null,
      "default_rule": "Derived from TimeOfCall in ESRI model; if missing remains blank.",
      "validation": {}
    },
    {
      "source_field_name": null,
      "internal_field_name": "Hour",
      "esri_field_name": null,
      "description": null,
      "required": null,
      "nullable": null,
      "source_type": null,
      "output_type": "string",
      "accepted_formats": [],
      "trim": null,
      "normalize_whitespace": null,
      "case_rule": null,
      "domain_file": [
        "scripts/esri_production_deploy.py (raw->Hour rename)",
        "scripts/apply_manual_corrections.py::fix_hour_field (extract HH:mm from TimeOfCall)",
        "scripts/esri_final_validation.py (checks Hour vs TimeOfCall)"
      ],
      "derive_rule": null,
      "coercions": null,
      "default_rule": "Deploy rename maps raw 'HourMinuetsCalc' to Hour. Some correction scripts repopulate Hour from TimeOfCall by extracting HH:mm; missing stays blank.",
      "validation": {}
    },
    {
      "source_field_name": null,
      "internal_field_name": "DayofWeek",
      "esri_field_name": null,
      "description": null,
      "required": null,
      "nullable": null,
      "source_type": null,
      "output_type": "string",
      "accepted_formats": [],
      "trim": null,
      "normalize_whitespace": null,
      "case_rule": null,
      "domain_file": [
        "scripts/esri_final_validation.py (expected_dayofweek = TimeOfCall.dt.strftime('%A'))",
        "Notion_Outline_Export/CAD_Data_Cleaning_Engine.md (DayofWeek definition)"
      ],
      "derive_rule": null,
      "coercions": null,
      "default_rule": "Derived from TimeOfCall in ESRI model; if missing remains blank.",
      "validation": {}
    },
    {
      "source_field_name": null,
      "internal_field_name": "TimeDispatched",
      "esri_field_name": null,
      "description": null,
      "required": null,
      "nullable": null,
      "source_type": null,
      "output_type": "datetime",
      "accepted_formats": [],
      "trim": null,
      "normalize_whitespace": null,
      "case_rule": null,
      "domain_file": null,
      "derive_rule": null,
      "coercions": null,
      "default_rule": "In sample export builder, parsed via pd.to_datetime(errors='coerce') -> NaT if invalid; not present in ESRI deploy required schema.",
      "validation": {}
    },
    {
      "source_field_name": null,
      "internal_field_name": "TimeOut",
      "esri_field_name": null,
      "description": null,
      "required": null,
      "nullable": null,
      "source_type": null,
      "output_type": "datetime",
      "accepted_formats": [],
      "trim": null,
      "normalize_whitespace": null,
      "case_rule": null,
      "domain_file": null,
      "derive_rule": null,
      "coercions": null,
      "default_rule": "In sample export builder, parsed via pd.to_datetime(errors='coerce') -> NaT if invalid; not present in ESRI deploy required schema.",
      "validation": {}
    },
    {
      "source_field_name": null,
      "internal_field_name": "TimeIn",
      "esri_field_name": null,
      "description": null,
      "required": null,
      "nullable": null,
      "source_type": null,
      "output_type": "datetime",
      "accepted_formats": [],
      "trim": null,
      "normalize_whitespace": null,
      "case_rule": null,
      "domain_file": null,
      "derive_rule": null,
      "coercions": null,
      "default_rule": "In sample export builder, parsed via pd.to_datetime(errors='coerce') -> NaT if invalid; not present in ESRI deploy required schema.",
      "validation": {}
    },
    {
      "source_field_name": null,
      "internal_field_name": "TimeSpent",
      "esri_field_name": null,
      "description": null,
      "required": null,
      "nullable": null,
      "source_type": null,
      "output_type": "string",
      "accepted_formats": [],
      "trim": null,
      "normalize_whitespace": null,
      "case_rule": null,
      "domain_file": [
        "Notion_Outline_Export/CAD_Data_Cleaning_Engine.md (TimeSpent definition)"
      ],
      "derive_rule": null,
      "coercions": null,
      "default_rule": "In sample export builder, forced to str(x) when present else None; validator allows object. Not present in ESRI deploy required schema.",
      "validation": {}
    },
    {
      "source_field_name": null,
      "internal_field_name": "TimeResponse",
      "esri_field_name": null,
      "description": null,
      "required": null,
      "nullable": null,
      "source_type": null,
      "output_type": "string",
      "accepted_formats": [],
      "trim": null,
      "normalize_whitespace": null,
      "case_rule": null,
      "domain_file": [
        "Notion_Outline_Export/CAD_Data_Cleaning_Engine.md (TimeResponse definition)"
      ],
      "derive_rule": null,
      "coercions": null,
      "default_rule": "In sample export builder, forced to str(x) when present else None; validator allows object. Not present in ESRI deploy required schema.",
      "validation": {}
    },
    {
      "source_field_name": null,
      "internal_field_name": "Officer",
      "esri_field_name": null,
      "description": null,
      "required": null,
      "nullable": null,
      "source_type": null,
      "output_type": "string",
      "accepted_formats": [],
      "trim": null,
      "normalize_whitespace": null,
      "case_rule": null,
      "domain_file": [
        "Notion_Outline_Export/CAD_Data_Cleaning_Engine.md (Officer definition)"
      ],
      "derive_rule": null,
      "coercions": null,
      "default_rule": "Optional. Blank stays blank; may be normalized in cleaning steps depending on pipeline run.",
      "validation": {}
    },
    {
      "source_field_name": null,
      "internal_field_name": "Disposition",
      "esri_field_name": null,
      "description": null,
      "required": null,
      "nullable": null,
      "source_type": null,
      "output_type": "string",
      "accepted_formats": [],
      "trim": null,
      "normalize_whitespace": null,
      "case_rule": null,
      "domain_file": [
        "config/config.yml (field_mappings.disposition.patterns)",
        "config/config_enhanced.json (validation_lists.valid_dispositions)",
        "scripts/apply_manual_corrections.py (Disposition corrections by ReportNumberNew)"
      ],
      "derive_rule": null,
      "coercions": null,
      "default_rule": "Optional. Can be normalized via pattern rules and manual corrections; blank stays blank.",
      "validation": {}
    },
    {
      "source_field_name": null,
      "internal_field_name": "Response_Type",
      "esri_field_name": null,
      "description": null,
      "required": null,
      "nullable": null,
      "source_type": null,
      "output_type": "string",
      "accepted_formats": [],
      "trim": null,
      "normalize_whitespace": null,
      "case_rule": null,
      "domain_file": [
        "scripts/esri_final_validation.py (ESRIFinalValidator.valid_response_types)",
        "ref/RAW_CAD_CALL_TYPE_EXPORT.xlsx (called by scripts/esri_production_deploy.py)",
        "ref/Unmapped_Response_Type.csv (called by scripts/esri_production_deploy.py)"
      ],
      "derive_rule": null,
      "coercions": null,
      "default_rule": "Deploy rename maps raw 'Response Type' to Response_Type. Mapping sources are loaded from RAW call types + manual mapping CSV; invalid/blank remains blank unless mapped.",
      "validation": {}
    },
    {
      "source_field_name": null,
      "internal_field_name": "CADNotes",
      "esri_field_name": null,
      "description": null,
      "required": null,
      "nullable": null,
      "source_type": null,
      "output_type": "string",
      "accepted_formats": [],
      "trim": null,
      "normalize_whitespace": null,
      "case_rule": null,
      "domain_file": [
        "scripts/validate_cad_notes_alignment.py",
        "scripts/compare_merged_to_manual_csv.py",
        "scripts/generate_final_manual_address_corrections.py"
      ],
      "derive_rule": null,
      "coercions": null,
      "default_rule": "Optional. Many scripts normalize notes and treat missing as empty string ''. Not present in ESRI deploy required schema.",
      "validation": {}
    }
  ]
}